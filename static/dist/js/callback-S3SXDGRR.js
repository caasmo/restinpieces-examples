import{c as r}from"./chunk-NTKSLLJF.js";document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("message"),s=new URLSearchParams(window.location.search),c=new r("http://localhost:8080"),a=c.store.provider.load();if(!a){d("No provider information found");return}let u={provider:a.name,code:s.get("code"),code_verifier:a.codeVerifier,redirect_uri:a.redirectURL};c.authWithOauth2(u).then(t=>{var o,n;if((o=t==null?void 0:t.data)!=null&&o.access_token&&((n=t==null?void 0:t.data)!=null&&n.record))c.store.auth.save(t.data),h(t.data.record);else throw new Error("No access token in response data")}).catch(t=>{console.error("Authentication failed:",t),d(t.response||{message:t.message})});function h(t){e.textContent="Authentication successful!",e.classList.add("success");let o=document.createElement("div");o.className="oauth-user-info",o.innerHTML=`
      <h3>Authentication Successful!</h3>
      <pre>${JSON.stringify(t,null,2)}</pre>
    `;let n=document.createElement("div");n.className="oauth-button-container";let i=document.createElement("button");i.textContent="Go to Dashboard",i.onclick=()=>window.location.href="/dashboard.html",n.appendChild(i),e.textContent="",e.appendChild(o),e.appendChild(n)}function d(t){console.error("OAuth2 error:",t),e.textContent=t.message||"Authentication failed",e.classList.add("error")}});
