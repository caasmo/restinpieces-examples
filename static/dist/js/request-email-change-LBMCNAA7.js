import{c as l}from"./chunk-NTKSLLJF.js";document.addEventListener("DOMContentLoaded",()=>{let s=document.getElementById("message"),i=document.getElementById("form"),o=document.getElementById("actions"),g=document.getElementById("changeButton"),r=new l({baseURL:"http://localhost:8080"});s.className="verify-message verify-loading",s.textContent="Loading user information...",s.classList.remove("verify-hidden");let n=r.store.auth.load();if(!n||!n.record||!n.record.email){a("You must be logged in to request email change");return}s.classList.add("verify-hidden"),i.classList.remove("verify-hidden"),g.addEventListener("click",()=>{let t=document.getElementById("newEmail").value.trim(),d=n.record.email;if(!t){a("Please enter a new email address");return}if(t===d){a("New email must be different from current email");return}s.className="verify-message verify-loading",s.textContent="Sending email change request...",r.requestEmailChange({email:d,new_email:t}).then(e=>{if(!(e!=null&&e.message))throw new Error("Invalid email change response: missing message");f(e.message),o.classList.remove("verify-hidden")}).catch(e=>{var c;console.error("Email change request failed:",e);let m="Failed to request email change";e.response?m=e.response.message||((c=e.response.data)==null?void 0:c.message)||JSON.stringify(e.response,null,2):e.message&&(m=e.message),a(m)})});function f(t){s.className="verify-message verify-success",s.textContent=t,i.classList.add("verify-hidden")}function a(t){s.className="verify-message verify-error",s.textContent=t,i.classList.add("verify-hidden"),o.classList.remove("verify-hidden")}});
