import{c as r}from"./chunk-NTKSLLJF.js";document.addEventListener("DOMContentLoaded",()=>{let a=new URLSearchParams(window.location.search).get("token"),n=document.getElementById("message"),c=document.getElementById("form"),i=document.getElementById("actions"),d=document.getElementById("confirmButton"),l=new r({baseURL:"http://localhost:8080"});if(!a){t("Missing email change token");return}d.addEventListener("click",()=>{let s=document.getElementById("password").value.trim();if(!s){t("Please enter your current password");return}n.className="confirm-message confirm-loading",n.textContent="Processing email change...",n.classList.remove("confirm-hidden"),l.confirmEmailChange({token:a,password:s}).then(e=>{if(!(e!=null&&e.message))throw new Error("Invalid email change response");g(e.message),i.classList.remove("confirm-hidden")}).catch(e=>{var m;console.error("Email change failed:",e);let o="Failed to confirm email change";e.response?o=e.response.message||((m=e.response.data)==null?void 0:m.message)||JSON.stringify(e.response,null,2):e.message&&(o=e.message),t(o)})});function g(s){n.className="confirm-message confirm-success",n.textContent=s,c.classList.add("confirm-hidden")}function t(s){n.className="confirm-message confirm-error",n.textContent=s,c.classList.add("confirm-hidden"),i.classList.remove("confirm-hidden")}});
