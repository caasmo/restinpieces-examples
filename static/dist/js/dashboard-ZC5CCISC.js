import{a as n,b as i,c as l}from"./chunk-NTKSLLJF.js";document.addEventListener("DOMContentLoaded",()=>{let t=new l({baseURL:"http://localhost:8080"}),o=t.store.auth.load()||{},c=o.record||{},u=o.access_token||"";document.getElementById("user-info").textContent=JSON.stringify(c,null,2),document.getElementById("current-token").textContent=u;function m(){let d=document.getElementById("refresh-error");d.textContent="";let r=t.store.auth.load()||{},s=r.access_token||"No token found";document.getElementById("previous-token").textContent=s,t.refreshAuth().then(e=>{var a;if((a=e==null?void 0:e.data)!=null&&a.access_token){let h=i(n({},r),{access_token:e.data.access_token,expires_in:e.data.expires_in});t.store.auth.save(h),document.getElementById("new-token").textContent=e.data.access_token,document.getElementById("current-token").textContent=e.data.access_token,document.getElementById("previous-token").textContent=s;let f=n(n({},c),e.data.record||{});document.getElementById("user-info").textContent=JSON.stringify(f,null,2)}else throw new Error("No access token in response")}).catch(e=>{console.error("Token refresh failed:",e),d.textContent=e.response?JSON.stringify(e.response,null,2):e.message})}document.getElementById("refresh-token-btn").addEventListener("click",m),document.getElementById("verify-email-btn").addEventListener("click",()=>{window.location.href="/request-email-verification.html"}),document.getElementById("change-email-btn").addEventListener("click",()=>{window.location.href="/request-email-change.html"}),document.getElementById("logout-btn").addEventListener("click",()=>{window.location.href="/logout.html"}),document.getElementById("request-password-reset-btn").addEventListener("click",()=>{window.location.href="/request-password-reset.html"})});
